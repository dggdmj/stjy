<style>    table tr > td{width: 80px !important}    .inputs{border: none;width: 90%;height: 98%;text-align: center;}    .lvse{background-color: #31e62e;}    body {        overflow-x: scroll;        background-color: #fff;        width: 9000px;    }    .kecheng_bg{        background:yellow;!important;    }    .do_enter{        border-color: blue;    }    td{        text-align: center;    }    .pz_text{width:96%;border:solid 1px #ccc;margin-left:2%}</style> <form method="post" id="form" action="#">    <p>当前审批角色：<span style="color: red;">{$role_name}</span></p>    <div class="panel one-box">        <div class="table-responsive">            <table id="table" class="table table-hover table-bordered table-condensed">                <caption align="top">{$nianyue}{$school_name}校长、总监工资表</caption>                <input type="hidden" name="qishu" value="{$qishu}">                <input type="hidden" name="sid" value="{$sid}">                <thead>                <tr >                    <td colspan="30">基本工资</td>                    <td colspan="4">福利补贴</td>                    <td></td>                </tr>                <tr>                    <td colspan="2"></td>                    <td>区域总监</td>                    <td>陈晓明区域</td>                    <td></td>                    <td></td>                    <td></td>                    <td></td>                    <td></td>                    <td></td>                    <td></td>                    <td>1</td>                    <td>2</td>                    <td>3</td>                    <td>4</td>                    <td>5</td>                    <td>6</td>                    <td>7</td>                    <td>8</td>                    <td>9</td>                    <td>10</td>                    <td>11</td>                    <td>12</td>                    <td>13</td>                    <td>14</td>                    <td>15</td>                    <td>16</td>                    <td>17</td>                    <td>18</td>                    <td>19</td>                    <td>20</td>                    <td>21</td>                    <td>22</td>                    <td>23</td>                    <td>24</td>                    <!-- <td>25</td>                    <td>26</td>                    <td>27</td>                    <td>28</td>                    <td>29</td> -->                                   </tr>                <tr>                    <td></td>                    <td></td>                    <td></td>                    <td></td>                    <td></td>                    <td></td>                    <td></td>                    <td></td>                    <td></td>                    <td></td>                    <td></td>                    <td></td>                    <td colspan="5">收入-支出</td>                    <td colspan="4">利润分配(含幼儿、小学、初中) </td>                    <td colspan="1">规模奖励 </td>                    <td colspan=""></td>                    <td colspan="3">校长营收考核奖励分成</td>                    <td colspan="9"></td>                </tr>                <tr>                    <td>序号</td>                    <td>月份</td>                    <td>分校</td>                    <td>部门</td>                    <td>二级部门</td>                    <td>岗位级别</td>                    <td>职位</td>                    <td>岗位类型</td>                    <td> 在职状态</td>                    <td>姓名</td>                    <td>身份证号</td>                    <td>入职日期</td>                    <td>收入</td>                    <td>支出</td>                    <td>现金净额</td>                    <td>是否开业前6个月内1.8倍</td>                    <td>净现金流分成</td>                    <td>利润分成</td>                    <!--<td>上月末正价在读学员数量</td>-->                    <!--<td>本月末正价在读学员数量</td>-->                    <!--<td>本月规模变化</td>-->                    <td>规模奖励分成</td>                    <td>退费考核分成</td>                    <td>周营收达标考核分成</td>                    <td>年度营收超额分成</td>                    <td>年度营收超超额分成</td>                    <td>开店奖励分成</td>                    <td>团队稳定分成</td>                    <td>素质基金</td>                    <td>考勤</td>                    <td>预发</td>                    <td>其他扣罚</td>                    <td>应发工资合计</td>                    <td>公积金</td>                    <td>个人社保</td>                    <td>个人所得税</td>                    <td>实发工资合计</td>               <!--      <td>第一次发放基本工资</td>                    <td>公帐发放</td>                    <td>其他银行</td>                    <td>年平均工资</td>                    <td>年薪总计</td> -->                    <td>备注</td>                </tr>                </thead>                <tbody>                <foreach name="list" item="val">                    <tr class="ftr">                        <td data-text="{$list_pz[$k]['xuhao']}"><input title="{$val.xingming}:序号" type="text" name="xuhao[]" value="{$val.xuhao}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['yuefen']}"><input title="{$val.xingming}:月份"  type="text" name="yuefen[]" value="{$val.yuefen}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['fenxiao']}"><input title="{$val.xingming}:分校"  type="text" name="fenxiao[]" value="{$val.fenxiao}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['bumen']}"><input title="{$val.xingming}:部门"  type="text" name="bumen[]" value="{$val.bumen}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['erjibm']}"><input title="{$val.xingming}:二级部门"  type="text" name="erjibm[]" value="{$val.erjibm}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['gangweijb']}"><input title="{$val.xingming}:岗位级别"  type="text" name="gangweijb[]" value="{$val.gangweijb}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['zhiwei']}"><input title="{$val.xingming}:职位"  type="text" name="zhiwei[]" value="{$val.zhiwei}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['gangweilx']}"><input title="{$val.xingming}:岗位类型"  type="text" name="gangweilx[]" value="{$val.gangweilx}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['zaizhizt']}"><input title="{$val.xingming}:在职状态"  type="text" name="zaizhizt[]" value="{$val.zaizhizt}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['xingming']}"><input title="{$val.xingming}:姓名"  type="text" name="xingming[]" value="{$val.xingming}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['shenfenzhm']}"><input title="{$val.xingming}:身份证号"  type="text" name="shenfenzhm[]" value="{$val.shenfenzhm}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['ruzhirq']}"><input title="{$val.xingming}:入职日期"  type="text" name="ruzhirq[]" value="{$val.ruzhirq}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['shouru']}"><input title="{$val.xingming}:收入"  type="text" name="shouru[]" value="{$val.shouru}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['zhichu']}"><input title="{$val.xingming}:支出"  type="text" name="zhichu[]" value="{$val.zhichu}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['xianjinje']}"><input title="{$val.xingming}:现金净额"  type="text" name="xianjinje[]" value="{$val.xianjinje}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['shifkyq']}"><input title="{$val.xingming}:是否开业前6个月内1.8倍"  type="text" name="shifkyq[]" value="{$val.shifkyq}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['jingxianjlfc']}"><input title="{$val.xingming}:净现金流分成"  type="text" name="jingxianjlfc[]" value="{$val.jingxianjlfc}" class="inputs lvse"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['lirunfc']}"><input title="{$val.xingming}:利润分成"  type="text" name="lirunfc[]" value="{$val.lirunfc}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <!--<td data-text="{$list_pz[$k]['xuhao']}"><input type="text" name="shangyuemzjzdxysl[]" value="{$val.shangyuemzjzdxysl}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>-->                        <!--<td data-text="{$list_pz[$k]['xuhao']}"><input type="text" name="benyuemzjzdxysl[]" value="{$val.benyuemzjzdxysl}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>-->                        <!--<td data-text="{$list_pz[$k]['xuhao']}"><input type="text" name="benyuegmbh[]" value="{$val.benyuegmbh}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>-->                        <td data-text="{$list_pz[$k]['guimojlfc']}"><input title="{$val.xingming}:规模奖励分成"  type="text" name="guimojlfc[]" value="{$val.guimojlfc}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['tuifeikhfc']}"><input title="{$val.xingming}:退费考核分成"  type="text" name="tuifeikhfc[]" value="{$val.tuifeikhfc}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['zhouyinsdbkhfc']}"><input title="{$val.xingming}:周营收达标考核分成"  type="text" name="zhouyinsdbkhfc[]" value="{$val.zhouyinsdbkhfc}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['nianduyscefc']}"><input title="{$val.xingming}:年度营收超额分成"  type="text" name="nianduyscefc[]" value="{$val.nianduyscefc}" class="inputs lvse"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['nianduysccefc']}"><input title="{$val.xingming}:年度营收超超额分成"  type="text" name="nianduysccefc[]" value="{$val.nianduysccefc}" class="inputs lvse"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['kaidianjlfc']}"><input title="{$val.xingming}:开店奖励分成"  type="text" name="kaidianjlfc[]" value="{$val.kaidianjlfc}" class="inputs lvse"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['tuanduiwdfc']}"><input title="{$val.xingming}:团队稳定分成"  type="text" name="tuanduiwdfc[]" value="{$val.tuanduiwdfc}" class="inputs lvse"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['suzhijj']}"><input title="{$val.xingming}:素质基金"  type="text" name="suzhijj[]" value="{$val.suzhijj}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['kaoqin']}"><input title="{$val.xingming}:考勤"  type="text" name="kaoqin[]" value="{$val.kaoqin}"  class="inputs  lvse"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['yufa']}"><input title="{$val.xingming}:预发"  type="text" name="yufa[]" value="{$val.yufa}" class="inputs  lvse"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['qitakk']}"><input title="{$val.xingming}:其他扣罚"  type="text" name="qitakk[]" value="{$val.qitakk}" class="inputs  lvse"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['yingfagzhj']}"><input title="{$val.xingming}:应发工资合计"  type="text" name="yingfagzhj[]" value="{$val.yingfagzhj}" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['gongjij']}"><input title="{$val.xingming}:公积金"  type="text" name="gongjij[]" value="{$val.gongjij}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['gerensb']}"><input title="{$val.xingming}:个人社保"  type="text" name="gerensb[]" value="{$val.gerensb}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['gerensds']}"><input title="{$val.xingming}:个人所得税"  type="text" name="gerensds[]" value="{$val.gerensds}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <td data-text="{$list_pz[$k]['shifagzhj']}"><input title="{$val.xingming}:实发工资合计"  type="text" name="shifagzhj[]" value="{$val.shifagzhj}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                        <!-- <td data-text="{$list_pz[$k]['xuhao']}"><input title="{$val.xingming}:第一次发放基本工资"  type="text" name="diyicffjbgz[]" value="{$val.diyicffjbgz}" class="inputs  lvse"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td> -->                        <!-- <td data-text="{$list_pz[$k]['xuhao']}"><input title="{$val.xingming}:公帐发放"  type="text" name="gongzhangfaf[]" value="{$val.gongzhangfaf}" class="inputs  lvse"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td> -->                        <!-- <td data-text="{$list_pz[$k]['xuhao']}"><input title="{$val.xingming}:其他银行"  type="text" name="qitayh[]" value="{$val.qitayh}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td> -->                        <!-- <td data-text="{$list_pz[$k]['xuhao']}"><input title="{$val.xingming}:年平均工资"  type="text" name="nianpjgz[]" value="{$val.nianpjgz}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td> -->                        <!-- <td data-text="{$list_pz[$k]['xuhao']}"><input title="{$val.xingming}:年薪总计"  type="text" name="nianxinzj[]" value="{$val.nianxinzj}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td> -->                        <td data-text="{$list_pz[$k]['beizhu']}"><input title="{$val.xingming}:备注"  type="text" name="beizhu[]" value="{$val.beizhu}" readonly="true" class="inputs"><span class="rightward  dialogss" data-toggle="click" data-target="#mydialog" data-mask="1" data-width="50%"></span></td>                    </tr>                </foreach>                <tr>                    <td></td>                    <td></td>                    <td><input type="text" name="" value="合计" class="inputs"></td>                    <td></td>                    <td></td>                    <td></td>                    <td></td>                    <td></td>                    <td></td>                    <td></td>                    <td></td>                    <td></td>                    <td><input type="text" name="shouru_hj" value="{$val.shouru}" readonly="true" class="inputs"></td>                    <td><input type="text" name="zhichu_hj" value="{$val.zhichu}" readonly="true" class="inputs"></td>                    <td><input type="text" name="xianjinje_hj" value="{$val.xianjinje}" readonly="true" class="inputs"></td>                    <td><input type="text" name="shifkyq_hj" value="{$val.shifkyq}" readonly="true" class="inputs"></td>                    <td><input type="text" name="jingxianjlfc_hj" value="{$val.jingxianjlfc}" readonly="true" class="inputs"></td>                    <td><input type="text" name="lirunfc_hj" value="{$val.lirunfc}" readonly="true" class="inputs"></td>                    <!--<td><input type="text" name="shangyuemzjzdxysl_hj" value="{$val.shangyuemzjzdxysl}" readonly="true" class="inputs"></td>-->                    <!--<td><input type="text" name="benyuemzjzdxysl_hj" value="{$val.benyuemzjzdxysl}" readonly="true" class="inputs"></td>-->                    <!--<td><input type="text" name="benyuegmbh_hj" value="{$val.benyuegmbh}" readonly="true" class="inputs"></td>-->                    <td><input type="text" name="guimojlfc_hj" value="{$val.guimojlfc}" readonly="true" class="inputs"></td>                    <td><input type="text" name="tuifeikhfc_hj" value="{$val.tuifeikhfc}" readonly="true" class="inputs"></td>                    <td><input type="text" name="zhouyinsdbkhfc_hj" value="{$val.zhouyinsdbkhfc}" readonly="true" class="inputs"></td>                    <td><input type="text" name="nianduyscefc_hj" value="{$val.nianduyscefc}" readonly="true" class="inputs"></td>                    <td><input type="text" name="nianduysccefc_hj" value="{$val.nianduysccefc}" readonly="true" class="inputs"></td>                    <td><input type="text" name="kaidianjlfc_hj" value="{$val.kaidianjlfc}" readonly="true" class="inputs"></td>                    <td><input type="text" name="tuanduiwdfc_hj" value="{$val.tuanduiwdfc}" readonly="true" class="inputs"></td>                    <td><input type="text" name="suzhijj_hj" value="{$val.suzhijj}" readonly="true" class="inputs"></td>                    <td><input type="text" name="kaoqin_hj" value="{$val.kaoqin}" readonly="true" class="inputs"></td>                    <td><input type="text" name="yufa_hj" value="{$val.yufa}" readonly="true" class="inputs"></td>                    <td><input type="text" name="qitakk_hj" value="{$val.qitakk}" readonly="true" class="inputs"></td>                    <td><input type="text" name="yingfagzhj_hj" value="{$val.yingfagzhj}" readonly="true" class="inputs"></td>                    <td><input type="text" name="gongjij_hj" value="{$val.gongjij}" readonly="true" class="inputs"></td>                    <td><input type="text" name="gerensb_hj" value="{$val.gerensb}" readonly="true" class="inputs"></td>                    <td><input type="text" name="gerensds_hj" value="{$val.gerensds}" readonly="true" class="inputs"></td>                    <td><input type="text" name="shifagzhj_hj" value="{$val.shifagzhj}" readonly="true" class="inputs"></td>                    <!-- <td><input type="text" name="diyicffjbgz_hj" value="{$val.diyicffjbgz}" readonly="true" class="inputs"></td> -->                    <!-- <td><input type="text" name="gongzhangfaf_hj" value="{$val.gongzhangfaf}" readonly="true" class="inputs"></td> -->                    <!-- <td><input type="text" name="qitayh_hj" value="{$val.qitayh}" readonly="true" class="inputs"></td> -->                    <!-- <td><input type="text" name="nianpjgz_hj" value="{$val.nianpjgz}" readonly="true" class="inputs"></td> -->                    <!-- <td><input type="text" name="nianxinzj_hj" value="{$val.nianxinzj}" readonly="true" class="inputs"></td> -->                    <td><input type="text" name="beizhu_hj" value="{$val.beizhu}" readonly="true" class="inputs"></td>                </tr>                </tbody>            </table>        </div>    </div></form><br/><button class="button bg-red button-larger btn_save_even" onclick="saves()">保存</button><a href="__MODULE__/WagesCommon/downloadZj/sid/{$sid}/qishu/{$qishu}"><button class="button bg-red button-larger btn_save_even">立即下载</button></a><if condition="$status_zt lt '3'">    <button class="button bg-red button-larger btn_save_even" onclick="tj_next()">提交下一步</button></if><if condition="$status_zt gt '0' and $status_zt lt '3'">    <button class="button bg-red button-larger btn_save_even" onclick="th_last()">退回上一步</button></if><if condition="$status_zt lt '7'">    <button class="button bg-red button-larger btn_save_even" onclick="tjxg()" style="margin-left: 5px;">提交修改</button></if><if condition="$status_zt eq '99'">    <button class="button bg-red button-larger btn_save_even" onclick="fhxg()" style="margin-left: 5px;">返回提交</button></if><script>    //提交修改    function tjxg(){        var status = '{$status}';        var status_zt = '{$status_zt}';        var sid = '{$sid}';        var qishu = '{$qishu}';        var suoshudd = '{$suoshudd}';        if(status == 0){            layer.msg('你没有权限进行此操作',{icon:2});            return false;        }        if(!suoshudd){            layer.msg('未保存请先保存',{'icon':2})            return false;        }        layer.confirm('您确认提交吗？提交后未返回不可操作。', {            icon: 4,            btn: ['提交','不提交'] //按钮        }, function(){            $.post('{:U('WagesCommon/tjxg')}',{'tname':'zjgz','sid':sid,'status':status_zt,'qishu':qishu,'suoshudd':suoshudd},function(data){                if(data){                    layer.msg('操作成功',{icon:1});                    setTimeout("window.location.reload()",1000);                }else{                    layer.msg(data.msg,{icon:2});                }            })        });    }    //返回修改    function fhxg(){        var status = '{$status}';        var status_zt = '{$status_zt}';        var sid = '{$sid}';        var qishu = '{$qishu}';        var suoshudd = '{$suoshudd}';        if(status == 0){            layer.msg('你没有权限进行此操作',{icon:2});            return false;        }        if(!suoshudd){            layer.msg('未保存请先保存',{'icon':2})            return false;        }        layer.confirm('你确认数据已保存并要提交？', {            icon: 4,            btn: ['提交','不提交'] //按钮        }, function(){            $.post('{:U('WagesCommon/fhxg')}',{'tname':'zjgz','sid':sid,'status':status_zt,'qishu':qishu,'suoshudd':suoshudd},function(data){                if(data){                    layer.msg('操作成功',{icon:1});                    setTimeout("window.location.reload()",1000);                }else{                    layer.msg(data.msg,{icon:2});                }            })        });    }    //提交    function tj_next(){        var status = '{$status}';        var status_zt = '{$status_zt}';        var suoshudd = '{$suoshudd}';        if(status == 0){            layer.msg('你没有权限进行此操作',{icon:2});            return false;        }        if(!suoshudd){            layer.msg('未保存请先保存',{'icon':2})            return false;        }        layer.confirm('您是否要保存当前页面数据？', {            icon: 4,            btn: ['保存','不保存'] //按钮        }, function(){            qr_saves();            $.post('{:U('WagesCommon/wageTj')}',{'tname':'zjgz','suoshudd':suoshudd,'status':status_zt},function(data){                if(data.status == 1){                    layer.msg('操作成功',{icon:1});                    setTimeout("window.location.reload()",1000);                }else{                    layer.msg(data.msg,{icon:2});                }            })        }, function(){            $.post('{:U('WagesCommon/wageTj')}',{'tname':'zjgz','suoshudd':suoshudd,'status':status_zt},function(data){                if(data.status == 1){                    layer.msg('操作成功',{icon:1});                    setTimeout("window.location.reload()",1000);                }else{                    layer.msg(data.msg,{icon:2});                }            })        });    }    //退回    function th_last(){        var status = '{$status}';        var status_zt = '{$status_zt}';        if(status == 0){            layer.msg('你没有权限进行此操作',{icon:2});            return false;        }        var suoshudd = '{$suoshudd}';        layer.confirm('您是否要保存当前页面数据？', {            icon: 4,            btn: ['保存','不保存'] //按钮        }, function(){            qr_saves();            $.post('{:U('WagesCommon/wageTh')}',{'tname':'zjgz','suoshudd':suoshudd,'status':status_zt},function(data){                if(data.status == 1){                    layer.msg('操作成功',{icon:1});                    setTimeout("window.location.reload()",1000);                }else{                    layer.msg(data.msg,{icon:2});                }            })        }, function(){            $.post('{:U('WagesCommon/wageTh')}',{'tname':'zjgz','suoshudd':suoshudd,'status':status_zt},function(data){                if(data.status == 1){                    layer.msg('操作成功',{icon:1});                    setTimeout("window.location.reload()",1000);                }else{                    layer.msg(data.msg,{icon:2});                }            })        });    }    //提示是否保存此页面数据    function is_save(){        var status = '{$status}';        if(status == 0){            return false;        }        layer.confirm('您是否要保存当前页面数据？', {            icon: 4,            btn: ['保存','继续提交'] //按钮        }, function(){            qr_saves();        });    }    var role_id = '{$role_id}';    var status_zt = '{$status_zt}';    if((role_id ==1 && status_zt == '99') || (role_id ==17 && status_zt == '99')){        $('.ftr td input').removeAttr('readonly');        $('.ftr td input').addClass('lvse');    }     function sortNumber(a,b)    {        return a - b    }    $('.lvse').parent().css('background-color','#31e62e');    $('.dialogss').click(function(){        $('td').removeClass('da_id');        $('.pz_text').val('');        var title = $(this).prev().attr('title');        var arr = title.split(':');        var val = $(this).parent().attr('data-text');        $(this).parent().addClass('da_id');        layer.open({            type: 1,            title:arr[1]+'-批注',            skin: 'layui-layer-rim', //加上边框            area: ['420px', '240px'], //宽高            content: '<textarea name="" id="" cols="30" rows="10" class="pz_text">'+val+'</textarea><br/><div style="text-align:center"><input type="button" value="保存" class="button bg-sub layui-layer-close1 layui-layer-close" onclick="inp_save()"/></div>'        });    })    function inp_save(){        var pz_text = $('.pz_text').val();        $('.da_id').attr('data-text',pz_text);        $('td').removeClass('da_id');        $('td').each(function(k,v){            var ts = $(this);            if($(v).attr('data-text')){                $(ts).children('span').css('color','red');            }        })    }    $('td').each(function(k,v){        var ts = $(this);        if($(v).attr('data-text')){            $(ts).children('span').css('color','red');        }    })        function jisuan(){         //个人所得税        $('input[name="gerensds[]"]').each(function(k,v){            gz = parseFloat($('input[name="yingfagzhj[]"]').eq(k).val() ? $('input[name="yingfagzhj[]"]').eq(k).val() : 0) -                  parseFloat($('input[name="gongjij[]"]').eq(k).val() ? $('input[name="gongjij[]"]').eq(k).val() : 0) -                 parseFloat($('input[name="gerensb[]"]').eq(k).val() ? $('input[name="gerensb[]"]').eq(k).val() : 0) - 5000;            if (gz > 0){                arr = new Array();                arr[0] = gz * 0.03-0;                arr[1] = gz * 0.1-210;                arr[2] = gz * 0.2-1410;                arr[3] = gz * 0.25-2660;                arr[4] = gz * 0.3-4410;                arr[5] = gz * 0.35-7160;                arr[6] = gz * 0.45-15160;                arr = arr.sort(sortNumber);                grsds = arr[arr.length -1];                grsds = new Number(grsds);                grsds = grsds.toFixed(2);                $(v).val(grsds);            }else{                $(v).val(0);            }        })    }    $('input').on('change ',function(){        //先计算其他要计算的部分在进行合计                //应发工资合计        $('input[name="yingfagzhj[]"]').each(function(k,v){            $(v).val(                parseFloat($('input[name="jingxianjlfc[]"]').eq(k).val() ? $('input[name="jingxianjlfc[]"]').eq(k).val() : 0) +                parseFloat($('input[name="lirunfc[]"]').eq(k).val() ? $('input[name="lirunfc[]"]').eq(k).val() : 0) +                parseFloat($('input[name="guimojlfc[]"]').eq(k).val() ? $('input[name="guimojlfc[]"]').eq(k).val() : 0) +                parseFloat($('input[name="tuifeikhfc[]"]').eq(k).val() ? $('input[name="tuifeikhfc[]"]').eq(k).val() : 0) +                parseFloat($('input[name="zhouyinsdbkhfc[]"]').eq(k).val() ? $('input[name="zhouyinsdbkhfc[]"]').eq(k).val() : 0) +                parseFloat($('input[name="nianduyscefc[]"]').eq(k).val() ? $('input[name="nianduyscefc[]"]').eq(k).val() : 0) +                parseFloat($('input[name="nianduysccefc[]"]').eq(k).val() ? $('input[name="nianduysccefc[]"]').eq(k).val() : 0) +                parseFloat($('input[name="kaidianjlfc[]"]').eq(k).val() ? $('input[name="kaidianjlfc[]"]').eq(k).val() : 0) +                parseFloat($('input[name="tuanduiwdfc[]"]').eq(k).val() ? $('input[name="tuanduiwdfc[]"]').eq(k).val() : 0) +                parseFloat($('input[name="suzhijj[]"]').eq(k).val() ? $('input[name="suzhijj[]"]').eq(k).val() : 0) +                parseFloat($('input[name="kaoqin[]"]').eq(k).val() ? $('input[name="kaoqin[]"]').eq(k).val() : 0) +                parseFloat($('input[name="yufa[]"]').eq(k).val() ? $('input[name="yufa[]"]').eq(k).val() : 0) +                parseFloat($('input[name="qitakk[]"]').eq(k).val() ? $('input[name="qitakk[]"]').eq(k).val() : 0)            )        })        jisuan();        //实发工资合计        $('input[name="shifagzhj[]"]').each(function(k,v){            $(v).val(                parseFloat($('input[name="yingfagzhj[]"]').eq(k).val() ? $('input[name="yingfagzhj[]"]').eq(k).val() : 0) -                parseFloat($('input[name="gongjij[]"]').eq(k).val() ? $('input[name="gongjij[]"]').eq(k).val() : 0) -                parseFloat($('input[name="gerensb[]"]').eq(k).val() ? $('input[name="gerensb[]"]').eq(k).val() : 0) -                parseFloat($('input[name="gerensds[]"]').eq(k).val() ? $('input[name="gerensds[]"]').eq(k).val() : 0)             )        })                        var shouru = 0;        var zhichu = 0;        var xianjinje = 0;        var shifkyq = 0;        var jingxianjlfc = 0;        var lirunfc = 0;        var shangyuemzjzdxysl = 0;        var benyuemzjzdxysl = 0;        var benyuegmbh = 0;        var guimojlfc = 0;        var tuifeikhfc = 0;        var zhouyinsdbkhfc = 0;        var nianduyscefc = 0;        var nianduysccefc = 0;        var kaidianjlfc = 0;        var tuanduiwdfc = 0;        var suzhijj = 0;        var kaoqin = 0;        var yufa = 0;        var qitakk = 0;        var yingfagzhj = 0;        var gongjij = 0;        var gerensb = 0;        var gerensds = 0;        var shifagzhj = 0;        var diyicffjbgz = 0;        var gongzhangfaf = 0;        var qitayh = 0;        var nianpjgz = 0;        var nianxinzj = 0;        $('input[name="shouru[]"]').each(function(k,v){            shouru += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="shouru_hj"]').val(shouru);        $('input[name="zhichu[]"]').each(function(k,v){            zhichu += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="zhichu_hj"]').val(zhichu);        $('input[name="xianjinje[]"]').each(function(k,v){            xianjinje += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="xianjinje_hj"]').val(xianjinje);        $('input[name="shifkyq[]"]').each(function(k,v){            shifkyq += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="shifkyq_hj"]').val(shifkyq);         $('input[name="jingxianjlfc[]"]').each(function(k,v){            jingxianjlfc += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="jingxianjlfc_hj"]').val(jingxianjlfc);        $('input[name="lirunfc[]"]').each(function(k,v){            lirunfc += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="lirunfc_hj"]').val(lirunfc);        $('input[name="shangyuemzjzdxysl[]"]').each(function(k,v){            shangyuemzjzdxysl += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="shangyuemzjzdxysl_hj"]').val(shangyuemzjzdxysl);        $('input[name="benyuemzjzdxysl[]"]').each(function(k,v){            benyuemzjzdxysl += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="benyuemzjzdxysl_hj"]').val(benyuemzjzdxysl);        $('input[name="benyuegmbh[]"]').each(function(k,v){            benyuegmbh += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="benyuegmbh_hj"]').val(benyuegmbh);        $('input[name="guimojlfc[]"]').each(function(k,v){            guimojlfc += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="guimojlfc_hj"]').val(guimojlfc);        $('input[name="tuifeikhfc[]"]').each(function(k,v){            tuifeikhfc += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="tuifeikhfc_hj"]').val(tuifeikhfc);        $('input[name="zhouyinsdbkhfc[]"]').each(function(k,v){            zhouyinsdbkhfc += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="zhouyinsdbkhfc_hj"]').val(zhouyinsdbkhfc);        $('input[name="nianduyscefc[]"]').each(function(k,v){            nianduyscefc += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="nianduyscefc_hj"]').val(nianduyscefc);        $('input[name="nianduysccefc[]"]').each(function(k,v){            nianduysccefc += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="nianduysccefc_hj"]').val(nianduysccefc);        $('input[name="kaidianjlfc[]"]').each(function(k,v){            kaidianjlfc += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="kaidianjlfc_hj"]').val(kaidianjlfc);        $('input[name="tuanduiwdfc[]"]').each(function(k,v){            tuanduiwdfc += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="tuanduiwdfc_hj"]').val(tuanduiwdfc);        $('input[name="suzhijj[]"]').each(function(k,v){            suzhijj += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="suzhijj_hj"]').val(suzhijj);        $('input[name="kaoqin[]"]').each(function(k,v){            kaoqin += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="kaoqin_hj"]').val(kaoqin);        $('input[name="yufa[]"]').each(function(k,v){            yufa += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="yufa_hj"]').val(yufa);        $('input[name="qitakk[]"]').each(function(k,v){            qitakk += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="qitakk_hj"]').val(qitakk);        $('input[name="yingfagzhj[]"]').each(function(k,v){            yingfagzhj += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="yingfagzhj_hj"]').val(yingfagzhj);        $('input[name="gongjij[]"]').each(function(k,v){            gongjij += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="gongjij_hj"]').val(gongjij);        $('input[name="gerensb[]"]').each(function(k,v){            gerensb += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="gerensb_hj"]').val(gerensb);        $('input[name="gerensds[]"]').each(function(k,v){            gerensds += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="gerensds_hj"]').val(gerensds);        $('input[name="shifagzhj[]"]').each(function(k,v){            shifagzhj += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="shifagzhj_hj"]').val(shifagzhj);        $('input[name="diyicffjbgz[]"]').each(function(k,v){            diyicffjbgz += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="diyicffjbgz_hj"]').val(diyicffjbgz);        $('input[name="gongzhangfaf[]"]').each(function(k,v){            gongzhangfaf += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="gongzhangfaf_hj"]').val(gongzhangfaf);        $('input[name="qitayh[]"]').each(function(k,v){            qitayh += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="qitayh_hj"]').val(qitayh);        $('input[name="nianpjgz[]"]').each(function(k,v){            nianpjgz += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="nianpjgz_hj"]').val(nianpjgz);        $('input[name="nianxinzj[]"]').each(function(k,v){            nianxinzj += parseFloat($(v).val() ? $(v).val() : 0)        })        $('input[name="nianxinzj_hj"]').val(nianxinzj);    })        function qr_saves(){        var data = new Array();        var pz = new Array();        $('tbody tr').each(function(k,v){            data[k] = new Array();            pz[k] = new Array();            $(v).find('td input').each(function(kd,vd){                data[k][kd] = $(vd).val();            })            $(v).find('td').each(function(kd,vd){                pz[k][kd] = $(vd).attr('data-text');            })        })        //吧数组转对象        var json=[];        data.forEach(function(item){            var temp={};            item.forEach(function(value,index){                temp[index]=value;            });            json.push(temp);        })        var pz_json=[];        pz.forEach(function(item){            var tmp={};            item.forEach(function(value,index){                tmp[index]=value;            });            pz_json.push(tmp);        })        var quyu = $('input[name="quyu"]').val();        var jibie = $('input[name="jibie"]').val();        var mubansj = $('input[name="mubansj"]').val();        var zhibiaoren = $('input[name="zhibiaoren"]').val();        var fenxiaofhr = $('input[name="fenxiaofhr"]').val();        var zongbushr = $('input[name="zongbushr"]').val();        var quyufhr = $('input[name="quyufhr"]').val();        var zongbushr = $('input[name="zongbushr"]').val();        var quyuxzrssh = $('input[name="quyuxzrssh"]').val();        var status = '{$status_zt}'        // 把对象串型化        var json = JSON.stringify(data);        var pz_json = JSON.stringify(pz_json);        var input = '<input type="hidden" name="status" value=\''+status+'\' /><input type="hidden" name="pz_json" value=\''+pz_json+'\' /><input type="hidden" name="jsons" value=\''+json+'\' /><input type="hidden" name="pz_json" value=\''+pz_json+'\' /><input type="hidden" name="qishu" value=\'{$qishu}\' /><input type="hidden" name="sid" value=\'{$sid}\' />';        input += '';        var form_=$("<form id='uss' action='{:U('WagesZj/saves')}' method='post'>"+input+"</form>"); //定义一个form表单        $('body').append(form_); //将表单放置在web中    //     form_.submit(); //表单提交         $.post('{:U('WagesZj/saves')}',$('#uss').serialize(),function(data){            if(data==1){                layer.msg('保存成功',{icon:1});                setTimeout("window.location.reload()",1000);            }else{                layer.msg('保存失败',{icon:2});            }        })    }    //提交代码    function saves(){        var status = '{$status}';        if(status == 0){            layer.msg('你没有权限进行修改',{icon:2});            return false;        }        var suoshudd = '{$suoshudd}';        if(!suoshudd){            layer.confirm('你是否确认自动生成数据全部正确，保存后此数据无法进行修改。', {                icon: 4,                btn: ['确定','取消'] //按钮            }, function(){                qr_saves();            });        }else{            qr_saves();        }    }</script>